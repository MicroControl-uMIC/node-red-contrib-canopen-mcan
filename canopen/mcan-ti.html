<!-- for detailed information: https://nodered.org/docs/creating-nodes/node-html -->

<script type="text/javascript">
    RED.nodes.registerType('mcan-ti',{
        category: 'CANopen',
        color: '#FFCC66',
        defaults: {
            name: {value:""},
            nodeId: {value: ""},
            productCode: {value: "12.43.005"},
            sensorType: {value: ""},
            moduleChannel: {value: ""},
            canBus: {value: ""},
            deviceName: {value: "µCAN.4.ti"}
        },
        oneditprepare: function() {
            $('.editor-tray-content').css({"width" : 400 +  "px"});
        },
        inputs:  0,
        outputs: 1,
        outputLabels: ["Number"],
        icon: "mcan-ti-in.png",
        label: function() {
        return this.name || "µCAN.4.ti";}
    });
</script>

<script type="text/x-red" data-template-name="mcan-ti">

    <p align="left"><strong>µCAN.4.ti-BOX </strong></p>

    <img src="/node-red-contrib-canopen-mcan/icons/mcan-4xi.png" alt="µCAN.4.ti" style="width:257px;height:208px;align="middle">

    <div class="form-row">
        <label for="node-input-name"> <span data-i18n="mcan-ti.labelName"></span> </label>
        <input type="text" id="node-input-name" style="width:200px; display:inline-block">
    </div>


    <div class="form-row">
        <label for="node-input-canBus"><span data-i18n="mcan-ti.labelCanCh"></span> </label>
        <select type="text" id="node-input-canBus" style="width:200px; display:inline-block">
            <option value="1">CAN 1</option>
            <option value="2">CAN 2</option>
       </select>
    </div>

    <div class="form-row">
        <label for="node-input-nodeId"><span data-i18n="mcan-ti.labelNodeId"></span> </label>
        <input type="number" id="node-input-nodeId" style="width:200px; display:inline-block" max="126" min="1">
    </div>

     <div class="mcan-labelInpSel">
    <p align="left" style="margin-left:70px"><span data-i18n="mcan-ti.labelInpSel"></span></p>

    <div class="form-row">
        <label for="node-input-moduleChannel"><i class="fa fa-thermometer-quarter"></i> <span data-i18n="mcan-ti.labelInpNum"></span></label>
        <select type="text" id="node-input-moduleChannel" style="width:200px; display:inline-block">
            <option value="0", data-i18n="mcan-ti.noOption"></option>
            <option value="1", data-i18n="mcan-ti.optionCh1"></option>
            <option value="2", data-i18n="mcan-ti.optionCh2"></option>
            <option value="3", data-i18n="mcan-ti.optionCh3"></option>
            <option value="4", data-i18n="mcan-ti.optionCh4"></option>
       </select>
    </div>

    <div class="form-row node-input-sensorType">
       <label for="node-input-sensorType"> <span data-i18n="mcan-ti.labelInpTyp"></span> </label>
       <select type="text" id="node-input-sensorType" style="width:200px; display:inline-block">
            <option value="0", data-i18n="mcan-ti.noOption"></option>
            <option value="30", data-i18n="mcan-ti.optionPt100"></option>
            <option value="32", data-i18n="mcan-ti.optionPt500"></option>
            <option value="33", data-i18n="mcan-ti.optionPt1000"></option>
            <option value="1", data-i18n="mcan-ti.optionThJ"></option>
            <option value="2", data-i18n="mcan-ti.optionThK"></option>
            <option value="3", data-i18n="mcan-ti.optionThL"></option>
            <option value="4", data-i18n="mcan-ti.optionThN"></option>
       </select>
    </div>
     </div>

    <script>
            $("#node-input-moduleChannel").change(function() {
                var checkCh = $("#node-input-moduleChannel").val();
             if (checkCh === "1") {
                 $(".node-input-sensorType").show();
             } else if (checkCh === "2") {
                 $(".node-input-sensorType").show();
             } else if (checkCh === "3") {
                 $(".node-input-sensorType").show();
             } else if (checkCh === "4") {
                 $(".node-input-sensorType").show();
             }
              else {
                 $(".node-input-sensorType").hide();
                 document.getElementById("node-input-moduleChannel").selectedIndex = "0";
             }
            });

    </script>

</script>
